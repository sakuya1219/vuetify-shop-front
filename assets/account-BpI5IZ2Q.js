import{a7 as f,a9 as h,D as k,o as V,ad as x,w as o,b as s,ag as b,ah as y,Q as g,aj as v,ak as w,al as C,az as I}from"./index-CGnndoj7.js";import{V as p}from"./VCol-fBxrDLe-.js";import{V as S}from"./VDataTable-BzumIBbz.js";import{V as B}from"./VRow-B8d4wPMj.js";import{V as A}from"./VContainer-9NSDrFXe.js";import"./VPagination--sZ6S9T1.js";import"./VList-BBaXpoGV.js";import"./VDivider-CrN0Idnh.js";const D=c=>(v("data-v-bf67d52d"),c=c(),w(),c),N=D(()=>C("h1",{class:"text-center"},"會員管理",-1)),P={__name:"account",setup(c){const{apiAuth:i}=I(),l=h(),n=k([]),m=[{title:"帳號",key:"account"},{title:"身分組",key:"role"},{title:"電子郵件",key:"email"},{title:"刪除",key:"action",sortable:!1}],d=async()=>{var e,a;try{const{data:t}=await i.get("/account");n.value.splice(0,n.value.length,...t.result)}catch(t){l({text:((a=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:a.message)||"發生錯誤",snackbarProps:{color:"red"}})}},u=async e=>{var a,t;try{await i.delete(`/account/${e}`),l({text:"刪除成功",snackbarProps:{color:"green"}}),d()}catch(r){l({text:((t=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:t.message)||"刪除失敗",snackbarProps:{color:"red"}})}},_=e=>e===1?"管理員":"會員";return d(),(e,a)=>(V(),x(A,null,{default:o(()=>[s(B,null,{default:o(()=>[s(p,{cols:"12"},{default:o(()=>[N]),_:1}),s(p,{cols:"12"},{default:o(()=>[s(S,{items:n.value,headers:m},{"item.role":o(({item:t})=>[b(y(_(t.role)),1)]),"item.action":o(({item:t})=>[s(g,{icon:"mdi-delete",variant:"text",color:"red",onClick:r=>u(t._id)},null,8,["onClick"])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1}))}},F=f(P,[["__scopeId","data-v-bf67d52d"]]);export{F as default};
