import{u as x,a9 as h,o as w,ad as S,w as r,b as s,ac as e,aS as k,aQ as m,al as f,Q as y,ag as B,aa as F}from"./index-CfZ3Q1Hw.js";import{c as q,a as d,u as C,e as p}from"./vee-validate.esm-BaYJV0ir.js";import{v as M}from"./index-D8l8QG9X.js";import{V}from"./VCol-BMGQnTgr.js";import{V as N}from"./VDivider-IaPHmBD6.js";import{V as R}from"./VForm-DEQqmvNc.js";import{V as T}from"./VRow-BdVzVzX5.js";import{V as U}from"./VContainer-D-Fu8aDS.js";const A=f("h1",{class:"text-center"},"登入",-1),P={class:"text-center"},J={__name:"login",setup(Q){const u=F(),g=x(),i=h(),v=q({account:d().required("使用者帳號必填").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符").test("isAlphanumeric","使用者帳號格式錯誤",o=>M.isAlphanumeric(o)),password:d().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符")}),{handleSubmit:b,isSubmitting:c}=C({validationSchema:v}),l=p("account"),n=p("password"),_=b(async o=>{const a=await g.login(o);if(a==="登入成功"){i({text:a,snackbarProps:{color:"green"}});const t=u.currentRoute.value.query.redirect||"/";u.push(t)}else i({text:a,snackbarProps:{color:"red"}})});return(o,a)=>(w(),S(U,null,{default:r(()=>[s(T,null,{default:r(()=>[s(V,{cols:"12"},{default:r(()=>[A]),_:1}),s(N),s(V,{cols:"12"},{default:r(()=>[s(R,{disabled:e(c),onSubmit:k(e(_),["prevent"])},{default:r(()=>[s(m,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:e(l).value.value,"onUpdate:modelValue":a[0]||(a[0]=t=>e(l).value.value=t),"error-messages":e(l).errorMessage.value},null,8,["modelValue","error-messages"]),s(m,{label:"密碼",minlength:"4",maxlength:"20",counter:"",type:"password",modelValue:e(n).value.value,"onUpdate:modelValue":a[1]||(a[1]=t=>e(n).value.value=t),"error-messages":e(n).errorMessage.value},null,8,["modelValue","error-messages"]),f("div",P,[s(y,{type:"submit",color:"green",loading:e(c)},{default:r(()=>[B("登入")]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{J as default};
