import{u as x,a9 as h,o as w,ac as S,w as r,b as s,ab as e,aR as k,aP as m,ak as f,Q as y,af as B,aX as F}from"./index-C5QfvmIE.js";import{c as R,a as d,u as q,e as p}from"./vee-validate.esm-BURE73Cp.js";import{v as C}from"./index-D8UDp0md.js";import{V}from"./VCol-tD9voUOp.js";import{V as M}from"./VDivider-NQIGA0Eq.js";import{V as N}from"./VForm-D956QFNU.js";import{V as P}from"./VRow-JzsSliHv.js";import{V as T}from"./VContainer-DaGjaZnN.js";const U=f("h1",{class:"text-center"},"登入",-1),A={class:"text-center"},I={__name:"login",setup($){const u=F(),g=x(),i=h(),v=R({account:d().required("使用者帳號必填").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符").test("isAlphanumeric","使用者帳號格式錯誤",o=>C.isAlphanumeric(o)),password:d().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符")}),{handleSubmit:b,isSubmitting:c}=q({validationSchema:v}),l=p("account"),n=p("password"),_=b(async o=>{const a=await g.login(o);if(a==="登入成功"){i({text:a,snackbarProps:{color:"green"}});const t=u.currentRoute.value.query.redirect||"/";u.push(t)}else i({text:a,snackbarProps:{color:"red"}})});return(o,a)=>(w(),S(T,null,{default:r(()=>[s(P,null,{default:r(()=>[s(V,{cols:"12"},{default:r(()=>[U]),_:1}),s(M),s(V,{cols:"12"},{default:r(()=>[s(N,{disabled:e(c),onSubmit:k(e(_),["prevent"])},{default:r(()=>[s(m,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:e(l).value.value,"onUpdate:modelValue":a[0]||(a[0]=t=>e(l).value.value=t),"error-messages":e(l).errorMessage.value},null,8,["modelValue","error-messages"]),s(m,{label:"密碼",minlength:"4",maxlength:"20",counter:"",type:"password",modelValue:e(n).value.value,"onUpdate:modelValue":a[1]||(a[1]=t=>e(n).value.value=t),"error-messages":e(n).errorMessage.value},null,8,["modelValue","error-messages"]),f("div",A,[s(y,{type:"submit",color:"green",loading:e(c)},{default:r(()=>[B("登入")]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{I as default};
