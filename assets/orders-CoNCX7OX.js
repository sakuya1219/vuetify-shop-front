import{a7 as h,a9 as V,D as v,o as y,ad as S,w as a,b as s,ag as m,ah as i,Q as x,aj as g,ak as b,al as w,az as P}from"./index-CfZ3Q1Hw.js";import{V as _}from"./VCol-BMGQnTgr.js";import{V as A}from"./VDataTable-Coz-stKl.js";import{V as I}from"./VRow-BdVzVzX5.js";import{V as C}from"./VContainer-D-Fu8aDS.js";import"./VPagination-C0fFO8EC.js";import"./VList-YZH_netS.js";import"./VDivider-IaPHmBD6.js";const D=r=>(g("data-v-6590f428"),r=r(),b(),r),$=D(()=>w("h1",{class:"text-center"},"預約管理",-1)),B={__name:"orders",setup(r){const{apiAuth:p}=P(),n=V(),d=v([]),f=[{title:"編號",key:"_id"},{title:"帳號",key:"user.account"},{title:"日期與時段",key:"timeSlot",value:t=>`${c(t.date)} ${t.timeSlot}`},{title:"人數",key:"numPeople",value:t=>`${t.numPeople} 人`},{title:"創建日期",key:"createdAt",value:t=>c(t.createdAt)},{title:"操作",key:"action",sortable:!1}],u=async()=>{var t,o;try{const{data:e}=await p.get("/order/all");d.value.splice(0,d.value.length,...e.result)}catch(e){n({text:((o=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:o.message)||"發生錯誤",snackbarProps:{color:"red"}})}};u();const k=async t=>{var o,e;try{await p.delete(`/order/${t}`),n({text:"刪除成功",snackbarProps:{color:"green"}}),u()}catch(l){n({text:((e=(o=l==null?void 0:l.response)==null?void 0:o.data)==null?void 0:e.message)||"刪除失敗",snackbarProps:{color:"red"}})}},c=t=>new Date(t).toISOString().split("T")[0];return(t,o)=>(y(),S(C,null,{default:a(()=>[s(I,null,{default:a(()=>[s(_,{cols:"12"},{default:a(()=>[$]),_:1}),s(_,{cols:"12"},{default:a(()=>[s(A,{items:d.value,headers:f},{"item.timeSlot":a(e=>[m(i(c(e.item.date))+" "+i(e.item.timeSlot),1)]),"item.numPeople":a(e=>[m(i(e.item.numPeople)+" 人 ",1)]),"item.createdAt":a(e=>[m(i(c(e.item.createdAt)),1)]),"item.action":a(({item:e})=>[s(x,{icon:"mdi-delete",variant:"text",color:"red",onClick:l=>k(e._id)},null,8,["onClick"])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1}))}},E=h(B,[["__scopeId","data-v-6590f428"]]);export{E as default};
